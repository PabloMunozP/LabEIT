{%extends '/pablo/base.html' %}

{%block title%}LabEIT - Gestion Usuarios{% endblock %}

{% block content %}
    <div class="container h-100">
        <div class="row align-items-center h-100">
            <div class="card-body">
                <h1 class="texto-gris-eit text-center">Gestion Usuario</h1>
                <hr>
                <div class="col-md-12 mt-2 mx-auto">
                    {% with msgs = get_flashed_messages() %}
                      {% if msgs %}
                        {% for msg in msgs %}
                          {% if msg == "editado-correcto"%}
                            <div class="alert alert-success alert-dismissible fade show" role="alert">
                              <i class="fas fa-check mr-2">Se ha modificado correctamente.</i>
                              <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                              <span aria-hidden="true">&times;</span>
                              </button>
                            </div>
                          {%endif%}
                          {% if msg == "agregar-correcto"%}
                            <div class="alert alert-success alert-dismissible fade show" role="alert">
                              <i class="fas fa-check mr-2">Se ha agregado correctamente.</i>
                              <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                              <span aria-hidden="true">&times;</span>
                              </button>
                            </div>
                          {%endif%}
                          {% if msg == "eliminar-correcto"%}
                            <div class="alert alert-success alert-dismissible fade show" role="alert">
                              <i class="fas fa-check mr-2">Se ha eliminado correctamente.</i>
                              <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                              <span aria-hidden="true">&times;</span>
                              </button>
                            </div>
                          {%endif%}
                        {%endfor%}
                      {%endif%}
                    {%endwith%}
                  </div>                  
                <div class="row float-right">
                    <div class="col-md-12">
                        <button type="button" data-target=" #agregar_usuario" class= "btn btn-info" data-toggle="modal">Agregar Usuario</button>
                         {% include 'pablo/añadir_usuario.html' %}
                         <button type="button" data-target=" #agregar_masivo" class= "btn btn-info" data-toggle="modal">Agregar Masivo</button>
                    </div>             
                </div>
                <div class="card-body">
                    <table class="table table-striped">
                        <caption>Lista de Usuarios</caption>
                        <thead>
                            <tr>
                                <th scope="col">Nombre</th>
                                <th scope="col">Apellido</th>
                                <th scope="col">Rut</th>
<<<<<<< Updated upstream
                                <th scope="col">Credencial</th>
                                <th scope="col"></th>
                                <th scope="col"></th>
                                <th scope="col"></th>
=======
                                <th scope="col">Tipo de credencial</th>
                                <th scope="colgroup" >Acciones</th>
>>>>>>> Stashed changes
                            </tr>
                        </thead>
                        <tbody>
                            {%for usuario in usuarios%}
                                <tr>
<<<<<<< Updated upstream
                                    <td>{{usuario[0]}}</td>
                                    <td>{{usuario[1]}}</td>
                                    <td>{{usuario[2]}}</td>
                                    <td>{{usuario[3]}}</td>
                                    <td><a class="btn btn-primary" href="/editar_usuario/{{usuario[2]}}" role="button" >Editar <svg class="bi bi-pencil" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                        <path fill-rule="evenodd" d="M11.293 1.293a1 1 0 0 1 1.414 0l2 2a1 1 0 0 1 0 1.414l-9 9a1 1 0 0 1-.39.242l-3 1a1 1 0 0 1-1.266-1.265l1-3a1 1 0 0 1 .242-.391l9-9zM12 2l2 2-9 9-3 1 1-3 9-9z"/>
                                        <path fill-rule="evenodd" d="M12.146 6.354l-2.5-2.5.708-.708 2.5 2.5-.707.708zM3 10v.5a.5.5 0 0 0 .5.5H4v.5a.5.5 0 0 0 .5.5H5v.5a.5.5 0 0 0 .5.5H6v-1.5a.5.5 0 0 0-.5-.5H5v-.5a.5.5 0 0 0-.5-.5H3z"/>
                                      </svg> </a></td>
                                    <td><a class="btn btn-secondary">Ver mas <svg class="bi bi-plus-circle-fill" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                        <path fill-rule="evenodd" d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4a.5.5 0 0 0-1 0v3.5H4a.5.5 0 0 0 0 1h3.5V12a.5.5 0 0 0 1 0V8.5H12a.5.5 0 0 0 0-1H8.5V4z"/>
                                      </svg> </a></td>
                                    <td><button class="btn btn-danger">Eliminar<svg class="bi bi-trash-fill" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                        <path fill-rule="evenodd" d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5a.5.5 0 0 0-1 0v7a.5.5 0 0 0 1 0v-7z"/>
                                      </svg> </button></td>
=======
                                    <td>{{usuario["nombres"]}}</td>
                                    <td>{{usuario["apellidos"]}}</td>
                                    <td>{{usuario["rut"]|formato_rut}}</td>
                                    <td>{{usuario["credencial"]}}</td>
                                    <td>
                                       <button type="button" data-target=" #editar_{{usuario['rut']}}" class= "btn btn-primary" data-toggle="modal"> Editar <i class="far fa-edit"></i> </button>
                                       {% include 'pablo/editar_usuario.html' %}
                                    </td>
                                    <td>
                                        <a class="btn btn-info"  href="/gestion_usuarios/ver_usuario?rut={{usuario['rut']}}" target="_blank"> Ver más <i class="fas fa-search-plus"></i></a>
                                    </td>
                                    <td>
                                        <button type="button" data-target="#eliminar_{{usuario['rut']}}" class="btn btn-danger" data-toggle="modal">Eliminar <i class="fas fa-trash-alt" ></i></button>
                                        {% include 'pablo/eliminar_usuario.html' %}
                                    </td>
>>>>>>> Stashed changes
                                </tr>
                            {%endfor%}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
<<<<<<< Updated upstream
{%endblock%}
=======

{%endblock%}
>>>>>>> Stashed changes
